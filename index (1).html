<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RP-PLUS SHOP</title>

<style>
:root{
  --bg:#0f0f0f;
  --card:#1c1c1c;
  --accent:#00ff88;
  --text:#ffffff;
}
body{
  margin:0;
  font-family:sans-serif;
  background:var(--bg);
  color:var(--text);
}
header{
  padding:15px;
  text-align:center;
  font-size:22px;
  font-weight:bold;
  background:#000;
  box-shadow:0 0 15px var(--accent);
}
button{
  padding:6px 12px;
  border:none;
  border-radius:8px;
  background:var(--accent);
  font-weight:bold;
  cursor:pointer;
  margin:3px;
}
.container{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:15px;
  padding:20px;
}
.card{
  background:var(--card);
  padding:15px;
  border-radius:12px;
  text-align:center;
  box-shadow:0 0 10px #00ff8844;
}
.icon{
  font-size:50px;
  margin-bottom:10px;
}
input{
  padding:6px;
  border-radius:6px;
  border:none;
  margin:5px;
}
</style>
</head>

<body>

<header>ğŸ”¥ RP-PLUS SHOP ğŸ”¥</header>

<div class="container" id="products"></div>

<div style="padding:20px;">
  <h3>ğŸ§º Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h3>
  <div id="cart"></div>
  <div id="total">Ø¬Ù…Ø¹: 0 Ø³Ú©Ù‡</div>
  <button onclick="checkout()">Ø«Ø¨Øª Ø®Ø±ÛŒØ¯</button>
  <div id="orderResult" style="margin-top:15px;"></div>
</div>

<script>

const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbym8kE8fpshax03zN6Z05XZSfdllcpctPEfgqNWCr35iyHFFnHYv-zQ2N8iSCFNgtYo/exec";

const products = [
["ğŸ¯","Ø¹Ø³Ù„",80],["ğŸ³","Ù†ÛŒÙ…Ø±Ùˆ",18],["ğŸ³","Ø§Ù…Ù„Øª",54],["ğŸ²","Ø³ÙˆÙ¾",54],
["ğŸ‚","Ú©ÛŒÚ© ØªÙˆÙ„Ø¯",269],["ğŸ°","Ú©ÛŒÚ©",25],["ğŸ§","Ú©ÛŒÚ© Ú©Ø§Ú©Ø§Ø¦ÙˆÛŒÛŒ",25],
["ğŸµ","Ø¯Ù…Ù†ÙˆØ´",60],["ğŸ•","Ù¾ÛŒØªØ²Ø§",100],["ğŸƒ","Ø¨Ø±Ú¯",5],["ğŸ¤","Ø¬ÙˆØ¬Ù‡",30],
["ğŸ“","Ù…Ø±Øº",50],["ğŸª¨","Ø³Ù†Ú¯",3],["ğŸ’§","Ø¢Ø¨",3],["ğŸ“˜","Ú©ØªØ§Ø¨",10],
["ğŸŒ­","Ù‡Ø§Øª Ø¯Ø§Ú¯",45],["â›½","Ø¨Ù†Ø²ÛŒÙ†",45],["ğŸ’","Ù…Ø±ÙˆØ§Ø±ÛŒØ¯",1900],
["ğŸ¥š","ØªØ®Ù… Ø·Ù„Ø§",1500],["ğŸ“¿","Ú¯Ø±Ø¯Ù†Ø¨Ù†Ø¯",5000],["ğŸ","Ù†Ø§Ù†",15],
["ğŸ¥ª","Ù†Ø§Ù† Ø³Ø§Ù†Ø¯ÙˆÛŒÚ†",15],["ğŸŒ¾","Ú¯Ù†Ø¯Ù…",2],["ğŸ¥›","Ø´ÛŒØ±",6],
["ğŸ¥š","ØªØ®Ù… Ù…Ø±Øº",6],["ğŸ”´","ÛŒØ§Ù‚ÙˆØª",1500],["ğŸ","Ø³ÛŒØ¨",10],
["ğŸ…","Ú¯ÙˆØ¬Ù‡",7],["ğŸ¥¬","Ú©Ø§Ù‡Ùˆ",7],["ğŸ¥•","Ù‡ÙˆÛŒØ¬",7]
];

let cart = {};
let total = 0;

function renderProducts(){
  const container=document.getElementById("products");
  products.forEach(p=>{
    container.innerHTML+=`
    <div class="card">
      <div class="icon">${p[0]}</div>
      <h4>${p[1]}</h4>
      <p>${p[2]} Ø³Ú©Ù‡</p>
      <button onclick="add('${p[1]}',${p[2]})">Ø®Ø±ÛŒØ¯</button>
    </div>`;
  });
}

function add(name,price){
  if(!cart[name]) cart[name]=0;
  cart[name]++;
  total+=price;
  updateCart();
}

function updateCart(){
  let html="";
  for(let i in cart){
    html+=cart[i]+" Ã— "+i+"<br>";
  }
  document.getElementById("cart").innerHTML=html;
  document.getElementById("total").innerText="Ø¬Ù…Ø¹: "+total+" Ø³Ú©Ù‡";
}

async function checkout(){
  if(Object.keys(cart).length===0){
    alert("Ø³Ø¨Ø¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª");
    return;
  }

  const code="RPPLUS-"+Date.now();

  try{

    await fetch(WEB_APP_URL,{
      method:"POST",
      body:JSON.stringify({
        code:code,
        items:JSON.stringify(cart),
        total:total
      })
    });

    document.getElementById("orderResult").innerHTML=`
      <div style="background:#1a1a1a;padding:10px;border-radius:8px;">
        <b>Ú©Ø¯ Ø±Ù‡Ú¯ÛŒØ±ÛŒ Ø´Ù…Ø§:</b><br>
        <input type="text" value="${code}" readonly style="width:70%;">
        <button onclick="copyText('${code}')">Ú©Ù¾ÛŒ</button>
        <br><br>
        <small>: Ø¯Ø± Ø±ÙˆØ¨ÛŒÚ©Ø§ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯ Ø¨Ù‡</small><br>
        <input type="text" value="@NINJA_100" readonly style="width:70%;margin-top:5px;">
        <button onclick="copyText('@NINJA_100')">Ú©Ù¾ÛŒ Ø¢ÛŒØ¯ÛŒ</button>
      </div>`;

    cart={};
    total=0;
    updateCart();

  }catch(err){
    alert("Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø³ÙØ§Ø±Ø´ âŒ");
    console.log(err);
  }
}

function copyText(text){
  const textarea=document.createElement('textarea');
  textarea.value=text;
  textarea.style.position='fixed';
  textarea.style.top='-9999px';
  document.body.appendChild(textarea);
  textarea.focus();
  textarea.select();
  document.execCommand('copy');
  document.body.removeChild(textarea);
  alert('Ú©Ù¾ÛŒ Ø´Ø¯ âœ…');
}

renderProducts();

</script>

</body>
</html>